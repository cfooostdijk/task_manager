<%= link_to('Back to Homepage', {controller: 'main', action: 'index'}, class: 'btn btn-secondary mb-3') %><br />

<div class="tasks index">
  <h2>Tasks</h2>

  <%= link_to("Add New Task", new_task_path, class: 'btn btn-primary mb-3') %>

  <table class="table table-striped table-bordered" summary="Task list" style="width: 100%;">
    <tr class="table-primary">
      <th>#</th>
      <th>Task</th>
      <th>Completed</th>
      <th>Description</th>
      <th>Category</th>
      <th>Actions</th>
    </tr>
    <% @tasks.each do |task| %>
    <tr>
      <td><%= task.position %></td>
      <td><%= task.name %></td>
      <td><%= task.completed? ? 'Yes' : 'No' %></td>
      <td><%= truncate(task.description, length: 30 ) %></td>
      <td><%= task.category&.name || '-' %></td>
      <td class="actions">
        <%= link_to("Show", task_path(task), class: 'btn btn-info btn-sm me-2') %>
        <%= link_to("Edit", edit_task_path(task), class: 'btn btn-warning btn-sm me-2') %>
        <%= link_to("Delete", delete_task_path(task), class: 'btn btn-danger btn-sm', method: :delete, data: { confirm: 'Are you sure?' }) %>
      </td>
    </tr>
    <% end %>
  </table>
</div>
